title: "Applivery.com iOS Deploy"
summary: Deploy your awesome iOS Application to Applivery.com
description: |-
  Deploy an iOS application to [Applivery](http://www.applivery.com),
  add notes and notify testers.

  Register a Applivery account at [http://www.applivery..com/](http://www.applivery.com)
  and create an App to utilize this step.

  You also need to get your *Account API Key* for you account and the *App Id* for the app.
website: https://github.com/applivery/steps-applivery-ios-deploy
source_code_url: https://github.com/applivery/steps-applivery-ios-deploy
support_url: https://github.com/applivery/steps-applivery-ios-deploy/issues
host_os_tags:
  - osx-10.10
project_type_tags:
  - ios
type_tags:
  - deploy
  - Applivery
  - iOS
is_requires_admin_user: false
is_always_run: false
is_skippable: false
run_if: ".IsCI"
inputs:
  - ipa_path: "$BITRISE_IPA_PATH"
    opts:
      title: "IPA file path"
      summary: ""
      description: ""
      is_required: true
  - api_token: "$APPLIVERY_API_TOKEN"
    opts:
      title: "Account API Key"
      summary: ""
      description: |-
        This is the API Key to access your account.

        ## Where to get the Applivery Account API Key?

        Sign in to your [Applivery.com](http://dashboard.applivery.com) account,
        click on Developers menu option from the left side menu and copy it from the
        Account API Key section.
      is_required: true
  - app_id: "$APPLIVERY_APP_ID"
    opts:
      title: "Applivery: App ID"
      summary: ""
      description: |-
        This is the App Id that identifies your App in Applivery.com

        ## Where to get the App Id?

        Sign in to your [Applivery.com](http://dashboard.applivery.com) account,
        click on Applications menu option from the left side menu, click on the desired App.
        You'll find the App Id inside the (i) information block (written in red).
      is_required: false
  - notes: "Deployed with Bitrise Applivery.com iOS Deploy Step."
    opts:
      title: "Release notes"
      summary: ""
      description: "Additional build/release notes"
  - notify: "true"
    opts:
      title: "Notify Testers?"
      summary: ""
      description: "This flag allows you to automatically notify your testers v√≠a email."
      value_options: ["true", "false"]
      is_required: true
  - autoremove: "true"
    opts:
      title: "(Optional) Automatically remove the oldest build?"
      summary: ""
      description: "Automatically remove the oldest build before uploading a new one to prevent reaching your account limits."
      value_options: ["true", "false"]
      is_required: false
  - tags: ""
    opts:
      title: "(Optional) Comma-separated list of tags"
      summary: ""
      description: "Comma-separated list of tags to easily identify the build"
      is_required: false
  - version_name: ""
    opts:
      title: "(Optional) Human readable version name"
      summary: ""
      description: "Human readable version name for this build."
outputs:
  - APPLIVERY_DEPLOY_STATUS:
    opts:
      title: "Deployment result: 'success' or 'failed'"
      summary: ""
      description: ""
      

  # ----------------------------------------------------------------
  # --- workflows to Share this step into a Step Library
  audit-this-step:
    steps:
    - script:
        inputs:
        - content: |-
            #!/bin/bash
            set -ex
            stepman audit --step-yml ./step.yml

  share-this-step:
    envs:
      # if you want to share this step into a StepLib
      - MY_STEPLIB_REPO_FORK_GIT_URL:
      - STEP_ID_IN_STEPLIB:
      - STEP_GIT_VERION_TAG_TO_SHARE:
      - STEP_GIT_CLONE_URL:
    description: |-
      If this is the first time you try to share a Step you should
      first call: $ bitrise share

      This will print you a guide, and information about how Step sharing
      works. Please read it at least once!

      As noted in the Step sharing guide you'll have to fork the
      StepLib you want to share this step into. Once you're done with forking
      the repository you should set your own fork's git clone URL
      in the `.bitrise.secrets.yml` file, or here in the `envs` section,
      as the value of the `MY_STEPLIB_REPO_FORK_GIT_URL` environment.

      You're now ready to share this Step, just make sure that
      the `STEP_ID_IN_STEPLIB` and `STEP_GIT_VERION_TAG_TO_SHARE`
      environments are set to the desired values!

      To share this Step into a StepLib you can just run: $ bitrise run share-this-step

      Once it finishes the only thing left is to actually create a Pull Request,
      the way described in the guide printed at the end of the process.
    before_run:
    - audit-this-step
    steps:
    - script:
        inputs:
        - content: |-
            #!/bin/bash
            set -ex
            bitrise share start -c ${MY_STEPLIB_REPO_FORK_GIT_URL}
            bitrise share create --stepid ${STEP_ID_IN_STEPLIB} --tag ${STEP_GIT_VERION_TAG_TO_SHARE} --git ${STEP_GIT_CLONE_URL}
            bitrise share finish

